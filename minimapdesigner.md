# 小地图（Minimap）设计思路记录

## 核心目标
创建一个独立于主游戏视野（高精度）的小地图战争迷雾系统（低精度），实现架构上的LOD分层。

## 架构方案
- **实现方式**: 创建一个独立的 `UUserWidget`，命名为 `UGeminiMinimapWidget`。
- **工作模式**: 该控件自包含迷雾生成逻辑，通过一个低频计时器（~1Hz）更新。
- **数据源**: 通过 `FMassEntityQuery` 查询所有相关的视野提供者实体。
- **渲染**: 将视野数据传递给一个专用材质，并绘制到一个低分辨率的 `UTextureRenderTarget2D` 上。此RT最终在UMG中显示。
- **交互**: 控件需提供坐标转换函数 `ConvertMinimapUVToWorldLocation`，以支持点击小地图移动镜头等功能。

## 关键争论点：Tag的使用
1.  **初版提议**: 创建一个新的 `FMassMinimapVisionSourceTag`，用于标记专门为小地图提供视野的单位。**理由**：实现主视野和小地图视野的彻底解耦，为未来非对称视野设计（如隐形单位）提供灵活性。
2.  **用户反馈 (初期)**: 认为视野应该是统一的，一个单位能看，就应该在所有地方（主世界、小地图）都能看，因此新Tag是过度设计。
3.  **最终共识**: 用户阐明了长期的LOD分层架构目标，确认**解耦是必要的**。小地图是全局视野层（LOD1），主视野是玩家中心的局部高精度层（LOD3）。因此，使用独立的 `FMassMinimapVisionSourceTag` 是正确的方向。

## 当前状态
**已搁置**。当前优先修复“全局战争迷雾视野剔除”的bug。待bug修复后，可根据此文档恢复小地图开发。
